# 라인트레이서_최종 실험

➨ 라인트레이서의 최종 결과물을 소개하겠습니다.

(코드 단위로의 설명은 저번 시간에 다뤘기 때문에, 현재 레포트에서는 흐름 위주로 설명하겠습니다.)

# < main.cpp >

https://github.com/smHan22/smart-vision/blob/858b1031f2dd84910c28cb426fa494621a94de90/line_tracer/linetracer_real/main.cpp#L1-L107

```
⦁ 역할 : 프로그램의 메인 로직을 담당하며, 전체적인 흐름을 담당

⦁ 처리 흐름

  1. 카메라 스트림 초기화 : jetson의 GStreamer 파이프라인을 통해 카메라 입력 스트림을 설정하고 확인

  2. GStreamer 출력 스트림 설정 : 원본 프레임과 이진화된 프레임을 네트워크로 전송할 준비를 함

  3. 장치 초기화 : Dynamixel 모터 제어 인터페이스 초기화, 오류 발생 시 프로그램 종료

  4. 프레임 처리

    - 카메라에서 프레임을 읽고, 이를 전처리(preprocessFrame) 및 라인 중심 에러 계산(calculateError)에 전달

    - 에러 값을 기반으로 모터 속도를 계산하고 모터를 제어

    - GStreamer 출력 스트림에 처리된 프레임을 전송

    - 일정한 프레임 속도를 유지하기 위해 타이밍 조정

  5. 종료 처리 : 스트림과 모터 연결을 종료 
```
